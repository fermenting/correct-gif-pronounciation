<!doctype <!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>guh-if OR jjj-if?</title>
</head>

<style>
  button {
  padding: 20px;
  font-size: 20px;
  margin: 10px;
}
img{
  /* float: left;
  display: inline; */
}
</style>

<body>
  <!-- div for buttons to attach to -->
  <div id="button-zone"></div>
  <hr>
  <!-- div for gifs to attach to -->
  <div id="display"></div>

  <!-- jQuery -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <!-- Javascript -->
  <script type="text/javascript">

    


    //Giphy API key
    var APIkey = "PD1l8CCVzcui4CZF5w6PRwzwUn5VguIu";

    //Starter Array for da buttons
    var internet = ["gif", "cats", "pizza", "meme", "fail", "troll", "lol", "crypto", "politics", "hashtag"]

    //time to iterate and create buttons
    for (var i = 0; i < internet.length; i++) {

      //make-a dem buttons
      var gifButton = $("<button>");
      gifButton.text(internet[i]);

      //appenda buttons to da button section
      $("#button-zone").append(gifButton);

      //end of da iteration
    }


    //button click functionality
    $("button").on("click", function () {

      //clear the display
      $("#display").empty();

      //grab the text of the button clicked
      var subject = $(this).text();
      // console.log(subject)

      //replace any spaces with "+" for da URL
      subject.replace(" ", "+");

      //how many gifs are we to grab?
      var limit = 10;

      //reach out to giphy for content
      var queryURL = "http://api.giphy.com/v1/gifs/search?q=" + subject + "&api_key=" + APIkey + "&limit=" + limit;

      $.ajax({
        url: queryURL,
        method: "GET"
      })

        //data received, now do:
        .then(function (gobject) {
          console.log("success got gobject", gobject);

          //for each gif object received:
          for (var i = 0; i < limit; i++) {

            //make a div for tha gif
            var displayGIF = $("<div>")

            //define-a all dem variables for dem gifs to display
            var stopURL = gobject.data[i].images.fixed_height_still.url;
            var goURL = gobject.data[i].images.fixed_height.url;
            var gifRating = gobject.data[i].rating;

            //display da gif rating
            var rating = $("<p>")
            rating.text("This gif is rated: " + gifRating)
            displayGIF.append(rating)

            //attacha all dem variables to da gif
            var imageGIF = $("<img>");
            imageGIF.attr("src", stopURL).attr("data-stop", stopURL).attr("data-go", goURL).attr("data-state", "stop").addClass("gif")
            displayGIF.append(imageGIF);

            //appenda all dem gifs to da page
            $("#display").append(displayGIF)

            //end of iteration
          }

          //end of data received
        });

      //end of button click
    });
//what happens when a gif is clicked?
$(document).on("click", ".gif",function() {

// console.log("clack")

      //collect the value of the current status
      var state = $(this).attr("data-state")
      // console.log(state)


      //if gif is stopped, make it go
      if (state === "stop") {
        $(this).attr("data-state", "go")
        $(this).attr("src", $(this).attr("data-go"))
        // console.log(state)
      }

      //if gif is go, make it stop
      if (state === "go") {
        $(this).attr("data-state", "stop")
        $(this).attr("src", $(this).attr("data-stop"))
        // console.log(state)
      }
    });




  </script>

</body>

</html>