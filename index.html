<!doctype <!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>guh-if OR jjj-if?</title>
</head>

<body>
  <!-- div for buttons to attach to -->
  <div id="button-zone"></div>
  <hr>
  <!-- div for gifs to attach to -->
  <div id="display"></div>
  
<!-- Let's do it all in one file -->
  <script type="text/javascript">

    //Giphy API key
    var APIkey = "PD1l8CCVzcui4CZF5w6PRwzwUn5VguIu";

    //Starter Array for da buttons
    var internet = ["cats", "pizza", "meme", "fail", "troll", "lol", "crypto", "politics", "hashtag"]

    //time to iterate and create buttons
    for (var i = 0; i < internet.length; i++) {

      //make-a dem buttons
      var gifButton = $("<button>");
      gifButton.text(internet[i]);

      //appenda buttons to da button section
      $("#button-zone").append(gifButton);

      //end of da iteration
    }


    //button click functionality
    $("<button>").on("click", function () {

      //clear the display
      $("#display").clear();

      //grab the text of the button clicked
      var subject = $(this).text();
      
      //replace any spaces with "+" for da URL
      subject.replace(" ", "+");

      //how many gifs are we to grab?
      var limit = 10;

      //reach out to giphy for content
      var xhr = $.get("http://api.giphy.com/v1/gifs/search?q=" + subject + "&api_key=" + APIkey + "&limit=" + limit);

      //data received, now do:
      xhr.done(function (data) {
        console.log("success got data", data);

        //for each gif object received:
        for (var i = 0; i < limit; i++) {

          //define-a all dem variables for dem gifs to display
          var stopURL = data[i].images.fixed_height_still.url;
          var goURL = data[i].images.fixed_height.url;
          var gifRating = data[i].rating;


          //attacha all dem variables to da gif
          var displayGIF = $("<div>");
          displayGIF.attr("src", stopURL).attr("data-stop", stopURL).attr("data-go", goURL).attr("data-state", "stop").addClass("gif")

          //append da rating to da gif
          var rating = $("<p>")
          rating.text("This gif rated: " + gifRating)
          displayGIF.append(rating)

          //appenda all dem gifs to da page, overwriting what was dere before.
          $("#display").append(displayGIF)


          //end of iteration
        }

        //end of data received
      });

      //end of button click
    })


    //what happens when a gif is clicked?
    $(".gif").on("click", function () {

      //if gif is stopped, make it go
      var state = $(this).attr("data-state")
      if (state === "stop") {
        $(this).attr("data-state", "go")
        $(this).attr("src", $(this).attr("data-go"))
        console.log(state)
      }

      //if gif is go, make it stop
      if (state === "go") {
        $(this).attr("data-state", "stop")
        $(this).attr("src", $(this).attr("data-stop"))
        console.log(state)
      }
    });

  </script>

  <!-- jQuery -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

</body>

</html>